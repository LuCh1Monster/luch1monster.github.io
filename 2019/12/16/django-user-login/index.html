<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Django用户登录与注册系统 | 路痴大魔王</title>
  <meta name="keywords" content=" Django用户登录 ">
  <meta name="description" content="Django用户登录与注册系统 | 路痴大魔王">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="页面未找到！">
<meta property="og:type" content="website">
<meta property="og:title" content="404">
<meta property="og:url" content="http:&#x2F;&#x2F;www.monsteryu.top&#x2F;404.html">
<meta property="og:site_name" content="路痴大魔王">
<meta property="og:description" content="页面未找到！">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-12-01T14:55:52.181Z">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar4.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/github.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1" ></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.0.1" ></script>

  <script>
    (function(){
        
    })();
  </script>
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value="">
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>郁明敏</span>
</div>

<div class="icon">
    
        
        <a title="github" href="https://github.com/luch1monster" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
        <a title="csdn" href="https://blog.csdn.net/LuCh1Monster" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-csdn"></use>
                </svg>
            
        </a>
        
    
        
        <a title="email" href="mailto:yu_mingm623@163.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=442523981&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(42)</small></div></li>
    
        
            
            <li><div data-rel="后端"><i class="fold iconfont icon-right"></i>后端<small>(15)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="Python">Python<small>(14)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="Hadoop">Hadoop<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="数据库"><i class="fold iconfont icon-right"></i>数据库<small>(5)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="蓝鲸">蓝鲸<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="MySQL">MySQL<small>(2)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="Hive">Hive<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="Impala">Impala<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
            <li><div data-rel="数据挖掘"><i class="fold iconfont icon-right"></i>数据挖掘<small>(4)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="LR">LR<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="数理统计">数理统计<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="强化学习">强化学习<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
            <li><div data-rel="工具"><i class="fold iconfont icon-right"></i>工具<small>(9)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="Chrome">Chrome<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="Markdown">Markdown<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="Notepad">Notepad<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="JetBrains">JetBrains<small>(3)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="Sublime">Sublime<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="GitHub">GitHub<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="XShell">XShell<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="学习资源">学习资源<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="系统"><i class="fold iconfont icon-right"></i>系统<small>(5)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="Linux">Linux<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="Mac">Mac<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="Windows">Windows<small>(3)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="文献阅读"><i class="fold iconfont icon-right"></i>文献阅读<small>(2)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="强化学习">强化学习<small>(1)</small></div>
                            
                        </li>
                            
                        <li><div data-rel="随机过程">随机过程<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
            <li><div data-rel="前端"><i class="fold iconfont icon-right"></i>前端<small>(1)</small></div>
                
                    <ul class="sub hide">
                        
                        <li><div data-rel="hexo">hexo<small>(1)</small></div>
                            
                        </li>
                            
                    </ul>
                
            </li>
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    </div>
    <div><a class="about  site_url"  href="/about">关于</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="42">
<input type="hidden" id="yelog_site_word_count" value="66.6k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="#">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="以 in: 开头进行全文搜索" autocomplete="off"id="local-search-input" >
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a class="color3">AirFlow</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">蓝鲸</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">Logistic Regression</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">Centos</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">MySQL</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">chrome</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">Requests</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">impala</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">datagrip</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">Flask</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">GitHub</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">hadoop</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">hive</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">Python学习资源</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">Jupyter</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">Linux</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">LGBM</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">GLIBC</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">系统</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">Mac</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">markdown</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">notepad</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">pandas</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">pycharm</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">Python常用库</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">impyla</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">强化学习</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">统计基础</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">随机过程</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">sublime</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">windows软件</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">windows</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">xshell</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">3-hexo</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">hexo</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">Python小技巧</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">Python关键字</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">数据挖掘</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">Django用户登录</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        <a id="top" class="前端 hexo "
           href="/2019/11/27/3-hexo-usage/"
           data-tag="3-hexo,hexo"
           data-author="郁明敏" >
            <span class="post-title" title="3-hexo主题使用补充">3-hexo主题使用补充</span>
            <span class="post-date" title="2019-11-27 16:53:35">2019/11/27</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/16/django-user-login/"
           data-tag="Django用户登录"
           data-author="郁明敏" >
            <span class="post-title" title="Django用户登录与注册系统">Django用户登录与注册系统</span>
            <span class="post-date" title="2019-12-16 21:22:02">2019/12/16</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/12/pandas-common-usages/"
           data-tag="pandas"
           data-author="郁明敏" >
            <span class="post-title" title="Pandas用法总结">Pandas用法总结</span>
            <span class="post-date" title="2019-12-12 19:30:49">2019/12/12</span>
        </a>
        
        <a  class="系统 Windows "
           href="/2019/12/12/windows-softwares-download/"
           data-tag="windows软件"
           data-author="郁明敏" >
            <span class="post-title" title="Windows软件下载">Windows软件下载</span>
            <span class="post-date" title="2019-12-12 13:53:23">2019/12/12</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/09/crawl-weekday-info/"
           data-tag="Requests"
           data-author="郁明敏" >
            <span class="post-title" title="Requests获取工作日信息">Requests获取工作日信息</span>
            <span class="post-date" title="2019-12-09 16:03:30">2019/12/09</span>
        </a>
        
        <a  class="工具 Notepad "
           href="/2019/12/08/notepad-common-usages/"
           data-tag="notepad"
           data-author="郁明敏" >
            <span class="post-title" title="Notepad++用法总结">Notepad++用法总结</span>
            <span class="post-date" title="2019-12-08 20:51:47">2019/12/08</span>
        </a>
        
        <a  class="工具 JetBrains "
           href="/2019/12/08/pycharm-common-usages/"
           data-tag="pycharm"
           data-author="郁明敏" >
            <span class="post-title" title="PyCharm用法总结">PyCharm用法总结</span>
            <span class="post-date" title="2019-12-08 20:46:04">2019/12/08</span>
        </a>
        
        <a  class="工具 Sublime "
           href="/2019/12/08/sublime-common-usages/"
           data-tag="sublime"
           data-author="郁明敏" >
            <span class="post-title" title="Sublime Text总结">Sublime Text总结</span>
            <span class="post-date" title="2019-12-08 20:42:31">2019/12/08</span>
        </a>
        
        <a  class="系统 Windows "
           href="/2019/12/08/windows-common-usages/"
           data-tag="windows"
           data-author="郁明敏" >
            <span class="post-title" title="Windows总结">Windows总结</span>
            <span class="post-date" title="2019-12-08 20:31:41">2019/12/08</span>
        </a>
        
        <a  class="工具 Chrome "
           href="/2019/12/08/chrome-common-plugins/"
           data-tag="chrome"
           data-author="郁明敏" >
            <span class="post-title" title="Chrome常用插件">Chrome常用插件</span>
            <span class="post-date" title="2019-12-08 20:29:18">2019/12/08</span>
        </a>
        
        <a  class="系统 Windows "
           href="/2019/12/08/windows-common-softwares/"
           data-tag="windows软件"
           data-author="郁明敏" >
            <span class="post-title" title="Window常用软件">Window常用软件</span>
            <span class="post-date" title="2019-12-08 20:22:58">2019/12/08</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/08/python-common-packages/"
           data-tag="Python常用库"
           data-author="郁明敏" >
            <span class="post-title" title="Python常用库">Python常用库</span>
            <span class="post-date" title="2019-12-08 20:04:22">2019/12/08</span>
        </a>
        
        <a  class="系统 Mac "
           href="/2019/12/08/mac-common-usages/"
           data-tag="系统,Mac"
           data-author="郁明敏" >
            <span class="post-title" title="MAC用法总结">MAC用法总结</span>
            <span class="post-date" title="2019-12-08 19:49:04">2019/12/08</span>
        </a>
        
        <a  class="数据库 MySQL "
           href="/2019/12/08/centos-migrate-mysql/"
           data-tag="Centos,MySQL"
           data-author="郁明敏" >
            <span class="post-title" title="Centos下迁移MySQL">Centos下迁移MySQL</span>
            <span class="post-date" title="2019-12-08 19:37:05">2019/12/08</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/08/python-install-packages/"
           data-tag="impala,impyla"
           data-author="郁明敏" >
            <span class="post-title" title="Python安装各种库的教程">Python安装各种库的教程</span>
            <span class="post-date" title="2019-12-08 19:29:16">2019/12/08</span>
        </a>
        
        <a  class="数据库 MySQL "
           href="/2019/12/08/centos-install-mysql/"
           data-tag="Centos,MySQL"
           data-author="郁明敏" >
            <span class="post-title" title="Centos安装MySQL服务">Centos安装MySQL服务</span>
            <span class="post-date" title="2019-12-08 19:01:46">2019/12/08</span>
        </a>
        
        <a  class="系统 Linux "
           href="/2019/12/08/linux-common-usages/"
           data-tag="Linux,LGBM,GLIBC"
           data-author="郁明敏" >
            <span class="post-title" title="Linux总结">Linux总结</span>
            <span class="post-date" title="2019-12-08 18:02:08">2019/12/08</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/08/jupyter-usages/"
           data-tag="Jupyter"
           data-author="郁明敏" >
            <span class="post-title" title="jupyter用法总结">jupyter用法总结</span>
            <span class="post-date" title="2019-12-08 17:39:50">2019/12/08</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/08/airflow-references/"
           data-tag="AirFlow"
           data-author="郁明敏" >
            <span class="post-title" title="AirFlow参考文档">AirFlow参考文档</span>
            <span class="post-date" title="2019-12-08 15:59:10">2019/12/08</span>
        </a>
        
        <a  class="数据库 蓝鲸 "
           href="/2019/12/08/blue-whale-common_usages/"
           data-tag="蓝鲸"
           data-author="郁明敏" >
            <span class="post-title" title="蓝鲸使用">蓝鲸使用</span>
            <span class="post-date" title="2019-12-08 15:40:18">2019/12/08</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/08/python-connect-impala-timeout/"
           data-tag="impala,impyla"
           data-author="郁明敏" >
            <span class="post-title" title="Python连接Impala超时">Python连接Impala超时</span>
            <span class="post-date" title="2019-12-08 15:34:09">2019/12/08</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/08/create-impala-table-using-python/"
           data-tag="impala"
           data-author="郁明敏" >
            <span class="post-title" title="使用Python在Impala中建表">使用Python在Impala中建表</span>
            <span class="post-date" title="2019-12-08 15:13:02">2019/12/08</span>
        </a>
        
        <a  class="工具 JetBrains "
           href="/2019/12/08/datagrip-add-customized-connections/"
           data-tag="datagrip"
           data-author="郁明敏" >
            <span class="post-title" title="DataGrip自定义连接Hive和Impala">DataGrip自定义连接Hive和Impala</span>
            <span class="post-date" title="2019-12-08 15:08:00">2019/12/08</span>
        </a>
        
        <a  class="数据库 Impala "
           href="/2019/12/08/impala-commonn-usages/"
           data-tag="impala"
           data-author="郁明敏" >
            <span class="post-title" title="Impala常规使用">Impala常规使用</span>
            <span class="post-date" title="2019-12-08 14:56:27">2019/12/08</span>
        </a>
        
        <a  class="数据库 Hive "
           href="/2019/12/08/hive-qas/"
           data-tag="hive"
           data-author="郁明敏" >
            <span class="post-title" title="Hive总结">Hive总结</span>
            <span class="post-date" title="2019-12-08 14:48:43">2019/12/08</span>
        </a>
        
        <a  class="后端 Hadoop "
           href="/2019/12/08/hadoop-qas/"
           data-tag="hadoop"
           data-author="郁明敏" >
            <span class="post-title" title="Hadoop总结">Hadoop总结</span>
            <span class="post-date" title="2019-12-08 14:27:24">2019/12/08</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/08/airflow-common-usages/"
           data-tag="AirFlow"
           data-author="郁明敏" >
            <span class="post-title" title="AirFlow用法总结">AirFlow用法总结</span>
            <span class="post-date" title="2019-12-08 14:24:18">2019/12/08</span>
        </a>
        
        <a  class="工具 Markdown "
           href="/2019/12/08/markdown-common-usages/"
           data-tag="markdown"
           data-author="郁明敏" >
            <span class="post-title" title="Markdown用法总结">Markdown用法总结</span>
            <span class="post-date" title="2019-12-08 13:40:22">2019/12/08</span>
        </a>
        
        <a  class="数据挖掘 强化学习 "
           href="/2019/12/08/morvan-courses-rl/"
           data-tag="强化学习"
           data-author="郁明敏" >
            <span class="post-title" title="莫烦-强化学习课程">莫烦-强化学习课程</span>
            <span class="post-date" title="2019-12-08 12:49:03">2019/12/08</span>
        </a>
        
        <a  class="工具 GitHub "
           href="/2019/12/08/github-search-project-skills/"
           data-tag="GitHub"
           data-author="郁明敏" >
            <span class="post-title" title="GitHub搜索开源项目技巧">GitHub搜索开源项目技巧</span>
            <span class="post-date" title="2019-12-08 11:10:15">2019/12/08</span>
        </a>
        
        <a  class="工具 JetBrains "
           href="/2019/12/08/pycharm-latest-activate-method/"
           data-tag="pycharm"
           data-author="郁明敏" >
            <span class="post-title" title="PyCharm2019.2最新激活方式">PyCharm2019.2最新激活方式</span>
            <span class="post-date" title="2019-12-08 10:27:59">2019/12/08</span>
        </a>
        
        <a  class="数据挖掘 数理统计 "
           href="/2019/12/08/statistics-hypothesis-testing/"
           data-tag="统计基础"
           data-author="郁明敏" >
            <span class="post-title" title="统计假设检验概论">统计假设检验概论</span>
            <span class="post-date" title="2019-12-08 10:26:23">2019/12/08</span>
        </a>
        
        <a  class="工具 XShell "
           href="/2019/12/07/xshell-connect-docker-server/"
           data-tag="xshell"
           data-author="郁明敏" >
            <span class="post-title" title="XShell连接Docker服务器下Centos终端">XShell连接Docker服务器下Centos终端</span>
            <span class="post-date" title="2019-12-07 23:40:55">2019/12/07</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/07/install-airflow/"
           data-tag="AirFlow"
           data-author="郁明敏" >
            <span class="post-title" title="AirFlow安装">AirFlow安装</span>
            <span class="post-date" title="2019-12-07 13:52:21">2019/12/07</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/07/flask-QA/"
           data-tag="Flask"
           data-author="郁明敏" >
            <span class="post-title" title="Flask总结">Flask总结</span>
            <span class="post-date" title="2019-12-07 11:58:54">2019/12/07</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/07/unfamiliar-key-words-in-python/"
           data-tag="Python关键字"
           data-author="郁明敏" >
            <span class="post-title" title="冷僻的Python内置关键字">冷僻的Python内置关键字</span>
            <span class="post-date" title="2019-12-07 02:15:12">2019/12/07</span>
        </a>
        
        <a  class="学习资源 "
           href="/2019/12/06/learning-resources-python/"
           data-tag="Python学习资源"
           data-author="郁明敏" >
            <span class="post-title" title="Python学习资源">Python学习资源</span>
            <span class="post-date" title="2019-12-06 22:52:18">2019/12/06</span>
        </a>
        
        <a  class="文献阅读 强化学习 "
           href="/2019/12/06/reinforcement-learning/"
           data-tag="强化学习"
           data-author="郁明敏" >
            <span class="post-title" title="文献-强化学习">文献-强化学习</span>
            <span class="post-date" title="2019-12-06 17:23:52">2019/12/06</span>
        </a>
        
        <a  class="后端 Python "
           href="/2019/12/04/python-common-tips/"
           data-tag="Python小技巧"
           data-author="郁明敏" >
            <span class="post-title" title="Python常用小技巧">Python常用小技巧</span>
            <span class="post-date" title="2019-12-04 17:44:20">2019/12/04</span>
        </a>
        
        <a  class="数据挖掘 "
           href="/2019/12/03/data-mining-common-steps-routines/"
           data-tag="数据挖掘"
           data-author="郁明敏" >
            <span class="post-title" title="数据挖掘下的一般步骤与套路">数据挖掘下的一般步骤与套路</span>
            <span class="post-date" title="2019-12-03 14:59:37">2019/12/03</span>
        </a>
        
        <a  class="文献阅读 随机过程 "
           href="/2019/12/01/stochastic-process/"
           data-tag="随机过程"
           data-author="郁明敏" >
            <span class="post-title" title="文献-随机过程">文献-随机过程</span>
            <span class="post-date" title="2019-12-01 23:45:46">2019/12/01</span>
        </a>
        
        <a  class="数据挖掘 LR "
           href="/2019/12/01/build-LR-model-steps/"
           data-tag="Logistic Regression"
           data-author="郁明敏" >
            <span class="post-title" title="LR建模总结">LR建模总结</span>
            <span class="post-date" title="2019-12-01 22:59:25">2019/12/01</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first">
                <i class="fa fa-arrow-circle-left" aria-hidden="true"></i>
            </div>
            <div class="brackets">
                <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
            </div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-django-user-login" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Django用户登录与注册系统</h1>
    
    <div class="article-meta">
        
        
        <span class="author"><a>郁明敏</a></span>
        
        
        <span class="book">
            
                <a  data-rel="后端">后端</a>/
            
                <a  data-rel="Python">Python</a>
            
        </span>
        
        
        <span class="tag">
            
            <a class="color1">Django用户登录</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2019-12-17 23:28:06'>2019-12-16 21:22</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:9.7k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-创建项目以及基本配置修改"><span class="toc-text">1. 创建项目以及基本配置修改</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-创建项目和APP"><span class="toc-text">1.1 创建项目和APP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-设置时区和语言"><span class="toc-text">1.2 设置时区和语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-启动"><span class="toc-text">1.3 启动</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-设计数据模型"><span class="toc-text">2. 设计数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-数据库模型设计"><span class="toc-text">2.1 数据库模型设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-设置MySQL数据库"><span class="toc-text">2.2 设置MySQL数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-创建用户和数据库"><span class="toc-text">2.2.1 创建用户和数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-配置MySQL连接"><span class="toc-text">2.2.2 配置MySQL连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-数据库迁移"><span class="toc-text">2.3 数据库迁移</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Admin后台"><span class="toc-text">3. Admin后台</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-在-admin-中注册模型"><span class="toc-text">3.1 在 admin 中注册模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-创建超级管理员"><span class="toc-text">3.2 创建超级管理员</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-URL路由和视图"><span class="toc-text">4. URL路由和视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-路由设计"><span class="toc-text">4.1 路由设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-架构初步视图"><span class="toc-text">4.2 架构初步视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-创建HTML页面文件"><span class="toc-text">4.3 创建HTML页面文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-前端页面设计"><span class="toc-text">5. 前端页面设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-原生HTML页面"><span class="toc-text">5.1 原生HTML页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-引入Bootstrap"><span class="toc-text">5.2 引入Bootstrap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-创建-base-html-模板文件"><span class="toc-text">5.3 创建 base.html 模板文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-设计等录页面"><span class="toc-text">5.4 设计等录页面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-登录视图"><span class="toc-text">6. 登录视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-完善登录视图"><span class="toc-text">6.1 完善登录视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-数据验证"><span class="toc-text">6.2 数据验证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-添加提示信息"><span class="toc-text">6.3 添加提示信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-Django表单"><span class="toc-text">7. Django表单</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-创建表单模型"><span class="toc-text">7.1 创建表单模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-修改视图"><span class="toc-text">7.2 修改视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-修改-login-登录界面"><span class="toc-text">7.3 修改 login 登录界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-手动渲染表单"><span class="toc-text">7.4 手动渲染表单</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-图片验证码"><span class="toc-text">8. 图片验证码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-安装-captcha"><span class="toc-text">8.1 安装 captcha</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-添加URL路由"><span class="toc-text">8.2 添加URL路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-修改-forms-py"><span class="toc-text">8.3 修改 forms.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-修改login-html"><span class="toc-text">8.4 修改login.html</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-Session会话"><span class="toc-text">9. Session会话</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-使用session"><span class="toc-text">9.1 使用session</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-完善页面"><span class="toc-text">9.2 完善页面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-注册视图"><span class="toc-text">10. 注册视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-创建forms"><span class="toc-text">10.1 创建forms</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-完善register-html"><span class="toc-text">10.2 完善register.html</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-注册视图"><span class="toc-text">10.3 注册视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-密码加密"><span class="toc-text">10.4 密码加密</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-二级路由"><span class="toc-text">11. 二级路由</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-添加登录的一级路由"><span class="toc-text">11.1 添加登录的一级路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-配置二级路由"><span class="toc-text">11.2 配置二级路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-修改HTML路由"><span class="toc-text">11.3 修改HTML路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-修改views-py中的重定向"><span class="toc-text">11.4 修改views.py中的重定向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-参考文档"><span class="toc-text">12. 参考文档</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><div class='inner-toc'><h2>目录</h2><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-创建项目以及基本配置修改"><span class="toc-text">1. 创建项目以及基本配置修改</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-创建项目和APP"><span class="toc-text">1.1 创建项目和APP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-设置时区和语言"><span class="toc-text">1.2 设置时区和语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-启动"><span class="toc-text">1.3 启动</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-设计数据模型"><span class="toc-text">2. 设计数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-数据库模型设计"><span class="toc-text">2.1 数据库模型设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-设置MySQL数据库"><span class="toc-text">2.2 设置MySQL数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-创建用户和数据库"><span class="toc-text">2.2.1 创建用户和数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-配置MySQL连接"><span class="toc-text">2.2.2 配置MySQL连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-数据库迁移"><span class="toc-text">2.3 数据库迁移</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Admin后台"><span class="toc-text">3. Admin后台</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-在-admin-中注册模型"><span class="toc-text">3.1 在 admin 中注册模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-创建超级管理员"><span class="toc-text">3.2 创建超级管理员</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-URL路由和视图"><span class="toc-text">4. URL路由和视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-路由设计"><span class="toc-text">4.1 路由设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-架构初步视图"><span class="toc-text">4.2 架构初步视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-创建HTML页面文件"><span class="toc-text">4.3 创建HTML页面文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-前端页面设计"><span class="toc-text">5. 前端页面设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-原生HTML页面"><span class="toc-text">5.1 原生HTML页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-引入Bootstrap"><span class="toc-text">5.2 引入Bootstrap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-创建-base-html-模板文件"><span class="toc-text">5.3 创建 base.html 模板文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-设计等录页面"><span class="toc-text">5.4 设计等录页面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-登录视图"><span class="toc-text">6. 登录视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-完善登录视图"><span class="toc-text">6.1 完善登录视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-数据验证"><span class="toc-text">6.2 数据验证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-添加提示信息"><span class="toc-text">6.3 添加提示信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-Django表单"><span class="toc-text">7. Django表单</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-创建表单模型"><span class="toc-text">7.1 创建表单模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-修改视图"><span class="toc-text">7.2 修改视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-修改-login-登录界面"><span class="toc-text">7.3 修改 login 登录界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-手动渲染表单"><span class="toc-text">7.4 手动渲染表单</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-图片验证码"><span class="toc-text">8. 图片验证码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-安装-captcha"><span class="toc-text">8.1 安装 captcha</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-添加URL路由"><span class="toc-text">8.2 添加URL路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-修改-forms-py"><span class="toc-text">8.3 修改 forms.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-修改login-html"><span class="toc-text">8.4 修改login.html</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-Session会话"><span class="toc-text">9. Session会话</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-使用session"><span class="toc-text">9.1 使用session</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-完善页面"><span class="toc-text">9.2 完善页面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-注册视图"><span class="toc-text">10. 注册视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-创建forms"><span class="toc-text">10.1 创建forms</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-完善register-html"><span class="toc-text">10.2 完善register.html</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-注册视图"><span class="toc-text">10.3 注册视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-密码加密"><span class="toc-text">10.4 密码加密</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-二级路由"><span class="toc-text">11. 二级路由</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-添加登录的一级路由"><span class="toc-text">11.1 添加登录的一级路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-配置二级路由"><span class="toc-text">11.2 配置二级路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-修改HTML路由"><span class="toc-text">11.3 修改HTML路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-修改views-py中的重定向"><span class="toc-text">11.4 修改views.py中的重定向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-参考文档"><span class="toc-text">12. 参考文档</span></a></li></ol></div></p>
<p>由于 Hexo 与 Jinja2 语法不兼容，所以本人中 HTML 中 将 <code>%</code> 均替换成了 <code>\%</code> 。</p>
<h1 id="1-创建项目以及基本配置修改"><a href="#1-创建项目以及基本配置修改" class="headerlink" title="1. 创建项目以及基本配置修改"></a>1. 创建项目以及基本配置修改</h1><h2 id="1-1-创建项目和APP"><a href="#1-1-创建项目和APP" class="headerlink" title="1.1 创建项目和APP"></a>1.1 创建项目和APP</h2><pre><code class="bash">→ django-admin startproject csml
→ python manage.py startapp login
</code></pre>
<h2 id="1-2-设置时区和语言"><a href="#1-2-设置时区和语言" class="headerlink" title="1.2 设置时区和语言"></a>1.2 设置时区和语言</h2><p>Django 默认使用的是美国时间和英语，在项目的 <code>csml/csml/settings</code> 文件中，将以下内容进行修改:</p>
<pre><code class="python">LANGUAGE_CODE = &#39;en-us&#39;

TIME_ZONE = &#39;UTC&#39;

USE_I18N = True

USE_L10N = True

USE_TZ = True
</code></pre>
<p>将其修改为 <code>亚洲/上海</code> 时区以及简体中文</p>
<pre><code class="python">LANGUAGE_CODE = &#39;zh-hans&#39;

TIME_ZONE = &#39;Asia/Shanghai&#39;

USE_I18N = True

USE_L10N = True

USE_TZ = False
</code></pre>
<p>上述几个参数的解释:</p>
<ul>
<li><code>LANGUAGE_CODE</code> 表示 Django 所选择的语言<ul>
<li><code>en-us</code> : 英文</li>
<li><code>zh-hans</code> : 简体中文</li>
<li><code>zh-hant</code> : 繁体中文</li>
</ul>
</li>
<li><code>TIME_ZONE</code> : 时区，常用的是 <code>Asia/Shanghai</code> 表示亚洲上海</li>
<li><code>USE_I18N</code> : 是否支持国际化语言，默认是开启的。如果 <code>USE_I18N=False</code>， Django 会进行一些优化，不加载国际化支持机制。</li>
</ul>
<h2 id="1-3-启动"><a href="#1-3-启动" class="headerlink" title="1.3 启动"></a>1.3 启动</h2><p>运行测试一下工程，在本机的浏览器中访问 <a href="http://127.0.0.1:8000/" target="_blank" rel="noopener">http://127.0.0.1:8000/</a></p>
<h1 id="2-设计数据模型"><a href="#2-设计数据模型" class="headerlink" title="2. 设计数据模型"></a>2. 设计数据模型</h1><h2 id="2-1-数据库模型设计"><a href="#2-1-数据库模型设计" class="headerlink" title="2.1 数据库模型设计"></a>2.1 数据库模型设计</h2><p> 作为一个用户登录和注册项目，需要保存的都是各种用户的相关信息。很显然，我们至少需要一张用户表 <code>User</code>，在用户表里需要保存下面的信息:</p>
<ul>
<li>用户名</li>
<li>密码</li>
<li>邮箱地址</li>
<li>性别</li>
<li>创建时间</li>
</ul>
<p>在文件 <code>csml/login/models.py</code> 添加如下内容:</p>
<pre><code class="python">from django.db import models


class User(models.Model):
    &quot;&quot;&quot;用户表&quot;&quot;&quot;
    gender = ((&quot;male&quot;, &quot;男&quot;), (&quot;female&quot;, &quot;女&quot;))
    username = models.CharField(max_length=128, unique=True)
    password = models.CharField(max_length=256)
    email = models.EmailField(unique=True)
    sex = models.CharField(max_length=32, choices=gender, default=&#39;男&#39;)
    register_time = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.username

    class Meta:
        ordering = [&quot;register_time&quot;]
        verbose_name = &quot;用户&quot;
        verbose_name_plural = &quot;用户&quot;
</code></pre>
<p>各个字段的含义:</p>
<ul>
<li><code>username</code> : 最长不超过 128 个字符，要求唯一</li>
<li><code>password</code> : 最长不超过 256 个字符</li>
<li><code>email</code> : Django 内置邮箱字符，要求唯一</li>
<li><code>sex</code> : 使用了 <code>choices</code> 参数，表示只能选择男或女，默认为男</li>
<li><code>__str__</code> : 帮助人性化显示对象信息</li>
<li><code>Meta</code>:<ul>
<li><code>ordering</code> : 排序<ul>
<li><code>ordering = [&quot;register_time&quot;]</code> 按照用户的添加时间升序。</li>
<li><code>ordering = [&quot;-register_time&quot;]</code> 则表示用户的添加时间降序。</li>
<li><code>ordering = [&quot;?register_time&quot;]</code> 则表示用户的添加时间随机排序。</li>
<li><code>ordering = [&quot;-register_time&quot;, &quot;username&quot;]</code> 则表示用户的添加时间随机降序，按照名字升序。</li>
</ul>
</li>
<li><code>verbose_name</code> : 给模型一个更可读的名字</li>
<li><code>verbose_name_plural</code> : 模型的复数形式，如果不指定，Django 会在模型名称之后加一个 <code>s</code></li>
</ul>
</li>
</ul>
<h2 id="2-2-设置MySQL数据库"><a href="#2-2-设置MySQL数据库" class="headerlink" title="2.2 设置MySQL数据库"></a>2.2 设置MySQL数据库</h2><h3 id="2-2-1-创建用户和数据库"><a href="#2-2-1-创建用户和数据库" class="headerlink" title="2.2.1 创建用户和数据库"></a>2.2.1 创建用户和数据库</h3><pre><code class="sql">&gt; create database ctest;
&gt; create user &#39;test&#39;@&#39;%&#39; identified by &#39;test&#39;;
&gt; grant all privileges on test.* to &#39;test&#39;@&#39;%&#39;  identified by &#39;test&#39;;
&gt; flush privileges;
</code></pre>
<h3 id="2-2-2-配置MySQL连接"><a href="#2-2-2-配置MySQL连接" class="headerlink" title="2.2.2 配置MySQL连接"></a>2.2.2 配置MySQL连接</h3><p>在 <code>csml/csml/settings.py</code> 文件中修改 <code>DATABASES</code> 参数:</p>
<pre><code class="python">DATABASES = {
    &#39;default&#39;: {
        &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,
        &#39;NAME&#39;: &#39;test&#39;,
        &#39;USER&#39;: &#39;test&#39;,
        &#39;PASSWORD&#39;: &#39;test&#39;,
        &#39;HOST&#39;: &#39;1.1.1.&#39;,
        &#39;PORT&#39;: &#39;3306&#39;
    }
}
</code></pre>
<p>由于我们使用 <code>PyMySQL</code> 作为连接库，而不使用 Django 默认的 <code>mysqlclient</code> ，需要在 <code>csml/__init__.py</code> 文件中添加:</p>
<pre><code class="python">import pymysql

pymysql.install_as_MySQLdb()</code></pre>
<blockquote>
<p>  <strong>注意</strong>: 这里纠正原文中的一个错误，原文中说的是 <code>csml/login/__init__.py</code>，这是不对的。</p>
</blockquote>
<h2 id="2-3-数据库迁移"><a href="#2-3-数据库迁移" class="headerlink" title="2.3 数据库迁移"></a>2.3 数据库迁移</h2><p>在 <code>csml/csml/settings.py</code> 中修改 <code>INSTALLED_APPS</code> 属性:</p>
<pre><code class="python">INSTALLED_APPS = [
    &#39;django.contrib.admin&#39;,
    &#39;django.contrib.auth&#39;,
    &#39;django.contrib.contenttypes&#39;,
    &#39;django.contrib.sessions&#39;,
    &#39;django.contrib.messages&#39;,
    &#39;django.contrib.staticfiles&#39;,
    &#39;login&#39;,
]</code></pre>
<p>然后在 <code>cmd</code> 或 <code>Terminal</code> 中运行迁移命令:</p>
<pre><code class="bash">→ python manage.py makemigrations
→ python manage.py migrate</code></pre>
<p>使用 <code>migrate</code> 命令后，在控制台会输出这样一行关于 MySQL 的警告:</p>
<pre><code>: (mysql.W002) MySQL Strict Mode is not set for database connection &#39;default&#39;
    HINT: MySQL&#39;s Strict Mode fixes many data integrity problems in MySQL, such as data truncation upon insertion, by escalating warnings into errors. It is strongly recommended you activate it.</code></pre><p>所以在 <code>csml/csml/settings.py</code> 中的 <code>DATABASES</code> 属性中还需要添加一下 <code>OPTIONS</code>:</p>
<pre><code class="python">DATABASES = {
    &#39;default&#39;: {
        &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,
        &#39;NAME&#39;: &#39;test&#39;,
        &#39;USER&#39;: &#39;test&#39;,
        &#39;PASSWORD&#39;: &#39;test&#39;,
        &#39;HOST&#39;: &#39;1.1.1.&#39;,
        &#39;OPTIONS&#39;: {
            &#39;init_command&#39;: &quot;SET sql_mode=&#39;traditional&#39;;&quot;,
        }
    }
}
</code></pre>
<h1 id="3-Admin后台"><a href="#3-Admin后台" class="headerlink" title="3. Admin后台"></a>3. Admin后台</h1><h2 id="3-1-在-admin-中注册模型"><a href="#3-1-在-admin-中注册模型" class="headerlink" title="3.1 在 admin 中注册模型"></a>3.1 在 admin 中注册模型</h2><p>在 <code>csml/csml/settings.py</code> 中添加以下内容:</p>
<pre><code class="python">from django.contrib import admin
from . import models


admin.site.register(models.User)
</code></pre>
<h2 id="3-2-创建超级管理员"><a href="#3-2-创建超级管理员" class="headerlink" title="3.2 创建超级管理员"></a>3.2 创建超级管理员</h2><p>使用 <code>createsuperuser</code> 来创建一个超级账户:</p>
<pre><code class="bash">→ python manage.py createsuperuser</code></pre>
<p>可以增加几个用户来进行后续的测试。需要注意的是，这里添加的用户应该是下图红框中用户，而不是系统的用户，因为后续用户的认证将会基于这个表来做查询的。</p>
<p><img src="https://img-blog.csdnimg.cn/20191217145215785.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="4-URL路由和视图"><a href="#4-URL路由和视图" class="headerlink" title="4. URL路由和视图"></a>4. URL路由和视图</h1><p>前面我们已经创建好数据模型了，并且在 Admin 后台中添加了一些测试用户。下面我们就要设计好站点的 URL 路由、对应的处理视图函数以及使用的前端模板了。</p>
<h2 id="4-1-路由设计"><a href="#4-1-路由设计" class="headerlink" title="4.1 路由设计"></a>4.1 路由设计</h2><p>初步设想需要下面的四个 URL:</p>
<p><img src="https://img-blog.csdnimg.cn/20191217130619748.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>考虑到登录系统属于站点的一级功能，为了直观和更易于接受，这里没有采用二级路由的方式，而是在根路由下直接编写路由条目，同样也没有使用反向解析名(<code>name</code>参数)。</p>
<p>在 <code>csml/csml/urls.py</code> 中添加以下内容:</p>
<pre><code class="python">from django.contrib import admin
from django.urls import path
from login import views

urlpatterns = [
    path(&#39;admin/&#39;, admin.site.urls),
    path(&#39;index/&#39;, views.index),
    path(&#39;login/&#39;, views.login),
    path(&#39;register/&#39;, views.register),
    path(&#39;logout/&#39;, views.logout),
]
</code></pre>
<h2 id="4-2-架构初步视图"><a href="#4-2-架构初步视图" class="headerlink" title="4.2 架构初步视图"></a>4.2 架构初步视图</h2><p>路由写好了，就进入<code>csml/login/views.py</code>文件编写视图的框架，代码如下：</p>
<pre><code class="python">from django.shortcuts import render, redirect


def index(request):
    pass
    return render(request, &#39;login/index.html&#39;)


def login(request):
    pass
    return render(request, &#39;login/login.html&#39;)


def register(request):
    pass
    return render(request, &#39;login/register.html&#39;)


def logout(request):
    pass
    return redirect(&#39;/index/&#39;)
</code></pre>
<p>我们先不着急完成视图内部的具体细节，而是把框架先搭建起来。</p>
<h2 id="4-3-创建HTML页面文件"><a href="#4-3-创建HTML页面文件" class="headerlink" title="4.3 创建HTML页面文件"></a>4.3 创建HTML页面文件</h2><p>在项目根路径的 <code>templates</code> 创建 <code>login</code> 文件夹，在<code>csml/templates/login</code>目录中创建三个文件<code>index.html</code>、<code>login.html</code>以及<code>register.html</code> ，并写入如下的代码：</p>
<ul>
<li>index.html</li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;首页&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;首页&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<ul>
<li>login.html</li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;登录&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;登录页面&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>register.html</li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;注册&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;注册页面&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h1 id="5-前端页面设计"><a href="#5-前端页面设计" class="headerlink" title="5. 前端页面设计"></a>5. 前端页面设计</h1><h2 id="5-1-原生HTML页面"><a href="#5-1-原生HTML页面" class="headerlink" title="5.1 原生HTML页面"></a>5.1 原生HTML页面</h2><p>在 <code>csml/templates/login/login.html</code> 文件中写入以下内容:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;登录&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style=&quot;margin: 15\% 40\%;&quot;&gt;
        &lt;h1&gt;欢迎登录！&lt;/h1&gt;
        &lt;form action=&quot;/login/&quot; method=&quot;post&quot;&gt;
            &lt;p&gt;
                &lt;label for=&quot;id_username&quot;&gt;用户名：&lt;/label&gt;
                &lt;input type=&quot;text&quot; id=&quot;id_username&quot; name=&quot;username&quot; placeholder=&quot;用户名&quot; autofocus required /&gt;
            &lt;/p&gt;

            &lt;p&gt;
                &lt;label for=&quot;id_password&quot;&gt;密码：&lt;/label&gt;
                &lt;input type=&quot;password&quot; id=&quot;id_password&quot; placeholder=&quot;密码&quot; name=&quot;password&quot; required /&gt;
            &lt;/p&gt;
            &lt;input type=&quot;submit&quot; value=&quot;确定&quot;&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>访问 <a href="http://127.0.0.1:8000/login/，可以看到以下界面" target="_blank" rel="noopener">http://127.0.0.1:8000/login/，可以看到以下界面</a>:</p>
<p><img src="https://img-blog.csdnimg.cn/20191217132016939.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="5-2-引入Bootstrap"><a href="#5-2-引入Bootstrap" class="headerlink" title="5.2 引入Bootstrap"></a>5.2 引入Bootstrap</h2><p>在项目根目录下创建 <code>static</code> 文件夹，并在 <code>csml/static</code> 创建 <code>css</code>、<code>js</code>、<code>fonts</code> 以及 <code>imgs</code> 文件夹:</p>
<p>下载 jQuery : <a href="http://www.jq22.com/jquery/jquery-3.4.1.zip" target="_blank" rel="noopener">http://www.jq22.com/jquery/jquery-3.4.1.zip</a></p>
<p>下载 Bootstrap: <a href="https://codeload.github.com/twbs/bootstrap/zip/v3.3.7" target="_blank" rel="noopener">https://codeload.github.com/twbs/bootstrap/zip/v3.3.7</a></p>
<p>最终文件的目录结构如下:</p>
<p><img src="https://img-blog.csdnimg.cn/20191217134807851.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>在 <code>csml/csml/settings.py</code> 中加入以下配置，用于指定静态文件的搜索目录:</p>
<pre><code class="python">STATIC_URL = &#39;/static/&#39;
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, &#39;static&#39;)
]
</code></pre>
<h2 id="5-3-创建-base-html-模板文件"><a href="#5-3-创建-base-html-模板文件" class="headerlink" title="5.3 创建 base.html 模板文件"></a>5.3 创建 base.html 模板文件</h2><p>既然要将前端页面做得像个样子，那么就不能和前面一样，每个页面都各写各的，单打独斗。一个网站有自己的统一风格和公用部分，可以把这部分内容集中到一个基础模板<code>base.html</code>中。现在，在根目录下的 <code>csml/templates</code> 中新建一个 <code>base.html</code> 文件用作站点的基础模板。</p>
<pre><code class="html">{\% load staticfiles \%}

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;zh-CN&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;title&gt;{\% block title \%}base{\% endblock \%}&lt;/title&gt;

    &lt;link href=&quot;{\% static &#39;css/bootstrap.min.css&#39; \%}&quot; rel=&quot;stylesheet&quot;&gt;
    {\% block css \%}{\% endblock \%}
  &lt;/head&gt;
  &lt;body&gt;
    &lt;nav class=&quot;navbar navbar-default&quot;&gt;
      &lt;div class=&quot;container-fluid&quot;&gt;

        &lt;div class=&quot;navbar-header&quot;&gt;
          &lt;button type=&quot;button&quot; class=&quot;navbar-toggle collapsed&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#my-nav&quot; aria-expanded=&quot;false&quot;&gt;
            &lt;span class=&quot;sr-only&quot;&gt;切换导航条&lt;/span&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;
          &lt;/button&gt;
          &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;Mysite&lt;/a&gt;
        &lt;/div&gt;

        &lt;!-- Collect the nav links, forms, and other content for toggling --&gt;
        &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;my-nav&quot;&gt;
          &lt;ul class=&quot;nav navbar-nav&quot;&gt;
            &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;{\% url &#39;index&#39; \%}&quot;&gt;主页&lt;/a&gt;&lt;/li&gt;
          &lt;/ul&gt;
          &lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt;
            &lt;li&gt;&lt;a href=&quot;{\% url &#39;login&#39; \%}&quot;&gt;登录&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;{\% url &#39;register&#39; \%}&quot;&gt;注册&lt;/a&gt;&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/nav&gt;

    {\% block content \%}{\% endblock \%}

    &lt;script src=&quot;{\% static &#39;js/jquery-3.4.1.js&#39; \%}&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;{\% static &#39;js/bootstrap.min.js&#39; \%}&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>简要说明:</p>
<ul>
<li>通过页面顶端的 <code>{\% load staticfiles \%}</code> 加载后，才可以使用 <code>static</code> 方法</li>
<li>通过 <code>{\% block title \%}{\% endblock \%}</code> ，设置了一个动态的页面 <code>title</code> 块</li>
<li>通过 <code>{\% block css \%}{\% endblock \%}</code>，设置了一个动态的 <code>css</code> 加载块</li>
<li>通过 <code>{\% block content \%}{\% endblock \%}</code>，为具体页面的主体内容留下接口</li>
<li>通过 <code>{\% static &#39;css/bootstrap.min.css&#39; \%}</code>将样式文件指向了我们的实际静态文件，下面的js脚本也是同样的道理。</li>
<li>通过 <code>{\% url &#39;index&#39; \%}</code> 来直接跳转到相应视图</li>
</ul>
<p>使用 <code>url &#39;index&#39;</code> 时，需要修改 <code>csml/csml/urls.py</code> 文件，增加 <code>name</code> 属性:</p>
<pre><code class="python">urlpatterns = [
    path(&#39;admin/&#39;, admin.site.urls),
    path(&#39;index/&#39;, views.index, name=&#39;index&#39;),
    path(&#39;login/&#39;, views.login, name=&#39;login&#39;),
    path(&#39;register/&#39;, views.register, name=&#39;register&#39;),
    path(&#39;logout/&#39;, views.logout, name=&#39;logout&#39;),
]
</code></pre>
<p>来查看一下具体效果:</p>
<p><img src="https://img-blog.csdnimg.cn/20191217141449898.png" alt="在这里插入图片描述"></p>
<h2 id="5-4-设计等录页面"><a href="#5-4-设计等录页面" class="headerlink" title="5.4 设计等录页面"></a>5.4 设计等录页面</h2><p>修改 <code>csml/templates/login/login.html</code> 文件:</p>
<pre><code class="html">{\% extends &#39;base.html&#39; \%}
{\% load staticfiles \%}
{\% block title \%}登录{\% endblock \%}
{\% block css \%}
    &lt;link rel=&quot;stylesheet&quot; href=&quot;{\% static &#39;css/login.css&#39; \%}&quot;&gt;
{\% endblock \%}


{\% block content \%}
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;col-md-4 col-md-offset-4&quot;&gt;
            &lt;form class=&#39;form-login&#39; action=&quot;/login/&quot; method=&quot;post&quot;&gt;
                &lt;h2 class=&quot;text-center&quot;&gt;欢迎登录&lt;/h2&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    &lt;label for=&quot;id_username&quot;&gt;用户名：&lt;/label&gt;
                    &lt;input type=&quot;text&quot; name=&#39;username&#39; class=&quot;form-control&quot; id=&quot;id_username&quot; placeholder=&quot;Username&quot;
                           autofocus required&gt;
                &lt;/div&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    &lt;label for=&quot;id_password&quot;&gt;密码：&lt;/label&gt;
                    &lt;input type=&quot;password&quot; name=&#39;password&#39; class=&quot;form-control&quot; id=&quot;id_password&quot; placeholder=&quot;Password&quot;
                           required&gt;
                &lt;/div&gt;
                &lt;button type=&quot;reset&quot; class=&quot;btn btn-default pull-left&quot;&gt;重置&lt;/button&gt;
                &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary pull-right&quot;&gt;提交&lt;/button&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
{\% endblock \%}
</code></pre>
<p>简单说明:</p>
<ul>
<li>通过 <code>{\% extends &#39;base.html&#39; \%}</code> 继承了 base.html 模板的内容</li>
<li>通过 <code>{\% block title \%}登录{\% endblock \%}</code> 设置了页面的 title</li>
<li>通过 <code>block css</code> 引入了自定义的<code>login.css</code>样式文件</li>
<li>主体内容定义在 <code>block content</code> 内部</li>
<li>添加了一个重置按钮。</li>
</ul>
<p>在 <code>csml/static/css</code> 文件夹中添加自定义 <code>login.css</code> 样式文件，内容如下:</p>
<pre><code class="css">body {
    background-color: #eee;
}

.form-login {
    max-width: 330px;
    padding: 15px;
    margin: 0 auto;
}

.form-login .form-control {
    position: relative;
    height: auto;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding: 10px;
    font-size: 16px;
}

.form-login .form-control:focus {
    z-index: 2;
}

.form-login input[type=&quot;text&quot;] {
    margin-bottom: -1px;
    border-bottom-right-radius: 0;
    border-bottom-left-radius: 0;
}

.form-login input[type=&quot;password&quot;] {
    margin-bottom: 10px;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
}
</code></pre>
<p>访问 <a href="http://127.0.0.1:8000/login/" target="_blank" rel="noopener">http://127.0.0.1:8000/login/</a> ，再次查看我们的效果:</p>
<p><img src="https://img-blog.csdnimg.cn/20191217142037423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="6-登录视图"><a href="#6-登录视图" class="headerlink" title="6. 登录视图"></a>6. 登录视图</h1><h2 id="6-1-完善登录视图"><a href="#6-1-完善登录视图" class="headerlink" title="6.1 完善登录视图"></a>6.1 完善登录视图</h2><p>根据我们在路由中的设计，用户通过 <code>login.html</code> 中的表单填写用户名和密码，并以 <code>POST</code> 的方式发送到服务器的 <code>/login/</code> 地址。服务器通过 <code>login/views.py</code> 中的 <code>login()</code> 视图函数，接收并处理这一请求。</p>
<p>我们可以通过下面的方法接收和处理请求:</p>
<pre><code class="python">def login(request):
    if request.method == &quot;POST&quot;:
        username = request.POST.get(&#39;username&#39;)
        password = request.POST.get(&#39;password&#39;)
        return redirect(&#39;/index/&#39;)
    return render(request, &#39;login/login.html&#39;)
</code></pre>
<p>访问 <a href="http://127.0.0.1:8000/login/" target="_blank" rel="noopener">http://127.0.0.1:8000/login/</a> 时，会报 <code>禁止访问 (403) CSRF验证失败. 请求被中断.</code>的错误。原因是在表单中没有添加 <code>CSRF</code> 验证。</p>
<p>修改 <code>csml/templates/login/login.html</code> 文件，给表单添加 <code>csrf</code> 验证:</p>
<pre><code class="html">&lt;form class=&#39;form-login&#39; action=&quot;/login/&quot; method=&quot;post&quot;&gt;
    {\% csrf_token \%}
    ...
&lt;/form&gt;</code></pre>
<p>进入登录页面，输入用户名，密码然后跳转到 index 页面。</p>
<h2 id="6-2-数据验证"><a href="#6-2-数据验证" class="headerlink" title="6.2 数据验证"></a>6.2 数据验证</h2><p>通过唯一的用户名，使用 Django 的 <code>ORM</code> 去数据库中查询用户数据，如果有匹配项，则进行密码对比，如果没有匹配项，说明用户名不存在。如果密码对比错误，说明密码不正确。</p>
<pre><code class="python">def login(request):
    if request.method == &quot;POST&quot;:
        username = request.POST.get(&#39;username&#39;)
        password = request.POST.get(&#39;password&#39;)
        username = username.strip()
        # 用户名字符合法性验证
        # 密码长度验证
        # 更多的其它验证.....
        try:
            user = models.User.objects.get(username=username)
        except:
            return render(request, &#39;login/login.html&#39;)
        if user.password == password:
            return redirect(&#39;/index/&#39;)
    return render(request, &#39;login/login.html&#39;)
</code></pre>
<blockquote>
<p>  注意，这里 <code>models.User.objects.get(username=username)</code> 查询的表示自定义的 <code>login_user</code> 表，而不是系统的 <code>auth_user</code> 表，可以借助 Navicat 进行数据库表的查看。</p>
</blockquote>
<h2 id="6-3-添加提示信息"><a href="#6-3-添加提示信息" class="headerlink" title="6.3 添加提示信息"></a>6.3 添加提示信息</h2><p>上面的代码还缺少很重要的一部分内容，提示信息! 无论是登录成功还是失败，用户都没有得到任何提示信息，这显然是不行的。</p>
<p>修改 <code>login</code> 视图:</p>
<pre><code class="python">def login(request):
    if request.method == &quot;POST&quot;:
        username = request.POST.get(&#39;username&#39;)
        password = request.POST.get(&#39;password&#39;)
        username = username.strip()
        try:
            user = models.User.objects.get(username=username)
            if user.password == password:
                return redirect(&#39;/index/&#39;)
            else:
                message = &#39;密码不正确!&#39;
        except:
            message = &#39;用户不存在&#39;

        return render(request, &#39;login/login.html&#39;, {&#39;message&#39;: message})
    return render(request, &#39;login/login.html&#39;)
</code></pre>
<p>增加了 <code>message</code> 变量，用于保存提示信息。当有错误信息的时候，将错误信息打包成一个字典，然后作为第三个参数提供给 <code>render()</code> 方法。这个数据字典在渲染模板的时候会传递到模板里供你调用。</p>
<p>为了在前端页面显示信息，还需要对 <code>csml/templates/login/login.html</code> 进行修改：</p>
<pre><code class="html">{\% block content \%}
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;col-md-4 col-md-offset-4&quot;&gt;
            &lt;form class=&#39;form-login&#39; action=&quot;/login/&quot; method=&quot;post&quot;&gt;
                {\% if message \%}
                    &lt;div class=&quot;alert alert-warning&quot;&gt;{{ message }}&lt;/div&gt;
                {\% endif \%}

                {\% csrf_token \%}
                &lt;h2 class=&quot;text-center&quot;&gt;欢迎登录&lt;/h2&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    &lt;label for=&quot;id_username&quot;&gt;用户名：&lt;/label&gt;
                    &lt;input type=&quot;text&quot; name=&#39;username&#39; class=&quot;form-control&quot; id=&quot;id_username&quot; placeholder=&quot;Username&quot;
                           autofocus required&gt;
                &lt;/div&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    &lt;label for=&quot;id_password&quot;&gt;密码：&lt;/label&gt;
                    &lt;input type=&quot;password&quot; name=&#39;password&#39; class=&quot;form-control&quot; id=&quot;id_password&quot; placeholder=&quot;Password&quot;
                           required&gt;
                &lt;/div&gt;
                &lt;button type=&quot;reset&quot; class=&quot;btn btn-default pull-left&quot;&gt;重置&lt;/button&gt;
                &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary pull-right&quot;&gt;提交&lt;/button&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
{\% endblock \%}
</code></pre>
<p>把 <code>csml/templates/login/index.html</code> 主页模板也修改一下，删除原有内容，添加下面的代码:</p>
<pre><code class="html">{\% extends &#39;login/base.html&#39; \%}

{\% block title \%}主页{\% endblock \%}
{\% block content \%}
    &lt;h1&gt;欢迎回来！&lt;/h1&gt;
{\% endblock \%}
</code></pre>
<h1 id="7-Django表单"><a href="#7-Django表单" class="headerlink" title="7. Django表单"></a>7. Django表单</h1><p>Django 的表单给我们提供了下面三个主要功能：</p>
<ul>
<li>准备和重构数据用于页面渲染</li>
<li>为数据创建 HTML 表单元素</li>
<li>接收和处理用户从表单发送过来的数据</li>
</ul>
<h2 id="7-1-创建表单模型"><a href="#7-1-创建表单模型" class="headerlink" title="7.1 创建表单模型"></a>7.1 创建表单模型</h2><p>在 <code>csml/login/</code> 文件夹下创建表单文件 <code>forms.py</code>，内容如下:</p>
<pre><code class="python">from django import forms


class UserForm(forms.Form):
    username = forms.CharField(label=&quot;用户名&quot;, max_length=128)
    password = forms.CharField(label=&quot;密码&quot;, max_length=256, widget=forms.PasswordInput)
</code></pre>
<p>简要说明:</p>
<ul>
<li>要先导入 <code>forms</code> 模块</li>
<li>所有的表单类都要继承 <code>forms.Form</code> 类</li>
<li>每个表单字段都有自己的字段类型比如 <code>CharField</code>，它们分别对应一种 HTML 语言中<code>&lt;form&gt;</code>内的一个 <code>input</code> 元素。这一点和 Django 模型系统的设计非常相似。</li>
<li><code>label</code> 参数用于设置 <code>&lt;label&gt;</code>标签</li>
<li><code>max_length</code>限制字段输入的最大长度。它同时起到两个作用，一是在浏览器页面限制用户输入不可超过字符数，二是在后端服务器验证用户输入的长度也不可超过。</li>
<li><code>widget=forms.PasswordInput</code>用于指定该字段在 <code>form</code> 表单里表现为<code>&lt;input type=&quot;password&quot; /&gt;</code>，也就是密码输入框。</li>
</ul>
<h2 id="7-2-修改视图"><a href="#7-2-修改视图" class="headerlink" title="7.2 修改视图"></a>7.2 修改视图</h2><p>使用了 Django 的表单后，就要在 <code>csml/login/views</code> 的 <code>login</code> 视图中进行相应的修改:</p>
<pre><code class="python">def login(request):
    if request.method == &quot;POST&quot;:
        login_form = UserForm(request.POST)
        message = &quot;请检查填写内容&quot;
        if login_form.is_valid():
            username = login_form.cleaned_data[&#39;username&#39;]
            password = login_form.cleaned_data[&#39;password&#39;]

            try:
                user = models.User.objects.get(username=username)
                if user.password == password:
                    return redirect(&#39;/index/&#39;)
                else:
                    message = &#39;密码不正确!&#39;
            except:
                message = &#39;用户不存在&#39;
        return render(request, &#39;login/login.html&#39;, locals())
    login_form = UserForm()
    return render(request, &#39;login/login.html&#39;, locals())
</code></pre>
<p>简要说明:</p>
<ul>
<li>对于非 <code>POST</code> 方法发送数据时，比如 <code>GET</code> 方法请求页面，返回空的表单，让用户可以填入数据</li>
<li>对于 <code>POST</code> 方法，接收表单数据，并验证</li>
<li>使用表单类自带的 <code>is_valid()</code> 方法一步完成数据验证工作</li>
<li>验证成功后可以从表单对象的 <code>cleaned_data</code> 数据字典中获取表单的具体值</li>
<li>如果验证不通过，则返回一个包含先前数据的表单给前端页面，方便用户修改。也就是说，它会帮你保留先前填写的数据内容，而不是返回一个空表!</li>
</ul>
<p>另外，这里使用了一个小技巧，Python 内置了一个 <code>locals()</code> 函数，它返回当前所有的本地变量字典，我们可以偷懒的将这作为 <code>render</code> 函数的数据字典参数值，就不用费劲去构造一个形如<code>{&#39;message&#39;:message, &#39;login_form&#39;:login_form}</code>的字典了。这样做的好处当然是大大方便了我们，但是同时也可能往模板传入了一些多余的变量数据，造成数据冗余降低效率。</p>
<h2 id="7-3-修改-login-登录界面"><a href="#7-3-修改-login-登录界面" class="headerlink" title="7.3 修改 login 登录界面"></a>7.3 修改 login 登录界面</h2><p>Django的表单很重要的一个功能就是自动生成 HTML 的 <code>form</code> 表单内容。现在，我们需要修改一下原来的 <code>login.html</code> 文件：</p>
<pre><code class="html">{\% extends &#39;base.html&#39; \%}
{\% load staticfiles \%}
{\% block title \%}登录{\% endblock \%}
{\% block css \%}
    &lt;link rel=&quot;stylesheet&quot; href=&quot;{\% static &#39;css/login.css&#39; \%}&quot;&gt;
{\% endblock \%}


{\% block content \%}
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;col-md-4 col-md-offset-4&quot;&gt;
            &lt;form class=&#39;form-login&#39; action=&quot;/login/&quot; method=&quot;post&quot;&gt;
                {\% if message \%}
                    &lt;div class=&quot;alert alert-warning&quot;&gt;{{ message }}&lt;/div&gt;
                {\% endif \%}

                {\% csrf_token \%}
                &lt;h2 class=&quot;text-center&quot;&gt;欢迎登录&lt;/h2&gt;

                {{ login_form }}

                &lt;button type=&quot;reset&quot; class=&quot;btn btn-default pull-left&quot;&gt;重置&lt;/button&gt;
                &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary pull-right&quot;&gt;提交&lt;/button&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
{\% endblock \%}
</code></pre>
<p>访问 <a href="http://127.0.0.1:8000/login/" target="_blank" rel="noopener">http://127.0.0.1:8000/login/</a> ，使用 Chrome 的审查元素，可以看到表单生成的。</p>
<p><img src="https://img-blog.csdnimg.cn/20191217153831605.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="7-4-手动渲染表单"><a href="#7-4-手动渲染表单" class="headerlink" title="7.4 手动渲染表单"></a>7.4 手动渲染表单</h2><p>直接 <code></code> 虽然好，啥都不用操心，但是界面真的很丑，往往并不是你想要的，如果你要使用 CSS 和 JS，比如你要引入 Bootstarps 框架，这些都需要对表单内的 <code>input</code> 元素进行额外控制，那怎么办呢？手动渲染字段就可以了。</p>
<p>可以通过 <code></code> 获取每一个字段，然后分别渲染，如下例所示:</p>
<pre><code class="html">&lt;div class=&quot;form-group&quot;&gt;
    {{ login_form.username.label_tag }}
    {{ login_form.username}}
&lt;/div&gt;
&lt;div class=&quot;form-group&quot;&gt;
    {{ login_form.password.label_tag }}
    {{ login_form.password }}
&lt;/div&gt;</code></pre>
<p>然后，在form类里添加attr属性即可，如下所示修改 <code>csml/login/forms.py</code>:</p>
<pre><code class="python">from django import forms


class UserForm(forms.Form):
    username = forms.CharField(label=&quot;用户名&quot;, max_length=128, widget=forms.TextInput(attrs={&#39;class&#39;: &#39;form-control&#39;}))
    password = forms.CharField(label=&quot;密码&quot;, max_length=256, widget=forms.PasswordInput(attrs={&#39;class&#39;: &#39;form-control&#39;}))
</code></pre>
<p>访问 <a href="http://127.0.0.1:8000/login/" target="_blank" rel="noopener">http://127.0.0.1:8000/login/</a> ，查看显示页面。</p>
<p><img src="https://img-blog.csdnimg.cn/20191217154445938.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="8-图片验证码"><a href="#8-图片验证码" class="headerlink" title="8. 图片验证码"></a>8. 图片验证码</h1><p>为了防止机器人频繁登录网站或者破坏分子恶意登录，很多用户登录和注册系统都提供了图形验证码功能。</p>
<p>验证码（CAPTCHA）是“Completely Automated Public Turing test to tell Computers and Humans Apart”（全自动区分计算机和人类的图灵测试）的缩写，是一种区分用户是计算机还是人的公共全自动程序。可以防止恶意破解密码、刷票、论坛灌水，有效防止某个黑客对某一个特定注册用户用特定程序暴力破解方式进行不断的登陆尝试。</p>
<p>图形验证码的历史比较悠久，到现在已经有点英雄末路的味道了。因为机器学习、图像识别的存在，机器人已经可以比较正确的识别图像内的字符了。但不管怎么说，作为一种防御手段，至少还是可以抵挡一些低级入门的攻击手段，抬高了攻击者的门槛。</p>
<p>在 Django 中实现图片验证码功能非常简单，有现成的第三方库可以使用，我们不必自己开发，这个库叫做 <code>django-simple-captcha</code>。</p>
<h2 id="8-1-安装-captcha"><a href="#8-1-安装-captcha" class="headerlink" title="8.1 安装 captcha"></a>8.1 安装 captcha</h2><p>直接安装：<code>pip install django-simple-captcha</code></p>
<p>Django 自动帮我们安装了相关的依赖库<code>six</code>、<code>olefile</code>和<code>Pillow</code>，其中的 <code>Pillow</code> 是大名鼎鼎的绘图模块。</p>
<p>还需要将 <code>captcha</code> 进行注册，在 <code>csml/csml/settings</code> 中，将 <code>&#39;captcha&#39;</code> 注册到 <code>app</code> 列表里:</p>
<pre><code class="python">INSTALLED_APPS = [
    &#39;django.contrib.admin&#39;,
    &#39;django.contrib.auth&#39;,
    &#39;django.contrib.contenttypes&#39;,
    &#39;django.contrib.sessions&#39;,
    &#39;django.contrib.messages&#39;,
    &#39;django.contrib.staticfiles&#39;,
    &#39;login&#39;,
    &#39;captcha&#39;,
]
</code></pre>
<p><code>captcha</code> 需要在数据库中建立自己的数据表，所以需要执行 <code>migrate</code> 命令生成数据表:</p>
<pre><code class="bash">→ python manage.py migrate</code></pre>
<p>完成上述操作后，会在 MySQL 的 <code>csml</code> 数据库中，新生成一张 <code>captcha_captchastore</code> 的表。</p>
<h2 id="8-2-添加URL路由"><a href="#8-2-添加URL路由" class="headerlink" title="8.2 添加URL路由"></a>8.2 添加URL路由</h2><p>根目录下的 <code>csml/csml/urls.py</code> 文件中增加 <code>captcha</code> 对应的网址:</p>
<pre><code class="python">from django.contrib import admin
from django.urls import path, include
from login import views

urlpatterns = [
    path(&#39;admin/&#39;, admin.site.urls),
    path(&#39;index/&#39;, views.index, name=&#39;index&#39;),
    path(&#39;login/&#39;, views.login, name=&#39;login&#39;),
    path(&#39;register/&#39;, views.register, name=&#39;register&#39;),
    path(&#39;logout/&#39;, views.logout, name=&#39;logout&#39;),
    path(&#39;captcha/&#39;, include(&#39;captcha.urls&#39;))
]
</code></pre>
<h2 id="8-3-修改-forms-py"><a href="#8-3-修改-forms-py" class="headerlink" title="8.3 修改 forms.py"></a>8.3 修改 forms.py</h2><p>下面可以在我们的 <code>forms.py</code> 文件中添加 <code>CaptchaField</code> 了。需要提前导入 <code>from captcha.fields import CaptchaField</code>，然后就像写普通的 <code>form</code> 字段一样添加一个 <code>captcha</code> 字段就可以了!</p>
<pre><code class="python">from django import forms
from captcha.fields import CaptchaField


class UserForm(forms.Form):
    username = forms.CharField(label=&quot;用户名&quot;, max_length=128, widget=forms.TextInput(attrs={&#39;class&#39;: &#39;form-control&#39;}))
    password = forms.CharField(label=&quot;密码&quot;, max_length=256, widget=forms.PasswordInput(attrs={&#39;class&#39;: &#39;form-control&#39;}))
    captcha = CaptchaField(label=&quot;验证码&quot;)</code></pre>
<p>这里其实还可以指定验证码错误的提示信息，只需要将 <code>captcha = CaptchaField(label=&quot;验证码&quot;, error_messages=&quot;验证码错误!&quot;)</code> 就可以了。</p>
<h2 id="8-4-修改login-html"><a href="#8-4-修改login-html" class="headerlink" title="8.4 修改login.html"></a>8.4 修改login.html</h2><p> 由于我们前面是手动生成的 <code>form</code> 表单，所以还要修改一下，添加 <code>captcha</code> 的相关内容，如下所示：</p>
<pre><code class="html">{\% extends &#39;base.html&#39; \%}
{\% load staticfiles \%}
{\% block title \%}登录{\% endblock \%}
{\% block css \%}
    &lt;link rel=&quot;stylesheet&quot; href=&quot;{\% static &#39;css/login.css&#39; \%}&quot;&gt;
{\% endblock \%}


{\% block content \%}
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;col-md-4 col-md-offset-4&quot;&gt;
            &lt;form class=&#39;form-login&#39; action=&quot;/login/&quot; method=&quot;post&quot;&gt;
                {\% if message \%}
                    &lt;div class=&quot;alert alert-warning&quot;&gt;{{ message }}&lt;/div&gt;
                {\% endif \%}

                {\% csrf_token \%}
                &lt;h2 class=&quot;text-center&quot;&gt;欢迎登录&lt;/h2&gt;

                 &lt;div class=&quot;form-group&quot;&gt;
                    {{ login_form.username.label_tag }}
                    {{ login_form.username}}
                &lt;/div&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    {{ login_form.password.label_tag }}
                    {{ login_form.password }}
                &lt;/div&gt;

                &lt;div class=&quot;form-group&quot;&gt;
                    {{ login_form.captcha.errors }}
                    {{ login_form.captcha.label_tag }}
                    {{ login_form.captcha }}
                &lt;/div&gt;

                &lt;button type=&quot;reset&quot; class=&quot;btn btn-default pull-left&quot;&gt;重置&lt;/button&gt;
                &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary pull-right&quot;&gt;提交&lt;/button&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
{\% endblock \%}
</code></pre>
<p>这里额外增加了一条 <code></code>用于明确指示用户，你的验证码不正确。</p>
<p>访问 <a href="http://127.0.0.1:8000/login/" target="_blank" rel="noopener">http://127.0.0.1:8000/login/</a> ，查看显示页面。</p>
<p><img src="https://img-blog.csdnimg.cn/20191217160200876.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>其中验证图形码是否正确的工作都是在后台自动完成的，只需要使用 <code>is_valid()</code> 这个 <code>forms</code> 内置的验证方法就一起进行了，完全不需要在视图函数中添加任何的验证代码，非常方便快捷!</p>
<blockquote>
<p>  可以看到，这里验证码错误时，提示信息是 <strong>认证码错误</strong>。如果在 <code>csml/login/forms.py</code> 中吸入的是 <code>captcha = CaptchaField(label=&quot;验证码&quot;, error_messages=&quot;验证码错误!&quot;)</code> 就会提示<strong>验证码错误!</strong>。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20191217160619428.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>关于验证码的使用，可以参考这篇博客: <a href="https://blog.csdn.net/xxm524/article/details/48370337" target="_blank" rel="noopener">https://blog.csdn.net/xxm524/article/details/48370337</a></p>
<p>对页面做了美化，主要在 <code>csml/csml/settings.py</code> 文件中添加了验证码的一些格式参数:</p>
<pre><code class="python"># 验证码的使用
# 指定验证码在前，输入框在后
CAPTCHA_OUTPUT_FORMAT = u&#39;\%(image)s \%(text_field)s \%(hidden_field)s &#39;

## 验证码图片大小
CAPTCHA_IMAGE_SIZE = (70, 25)
CAPTCHA_BACKGROUND_COLOR = &#39;#ffffff&#39;
## 图片中的文字为数字表达式，如1+2=&lt;/span&gt;
CAPTCHA_CHALLENGE_FUNCT = &#39;captcha.helpers.math_challenge&#39;

CAPTCHA_LENGTH = 4  # 字符个数
CAPTCHA_TIMEOUT = 1  # 超时(minutes)
</code></pre>
<p>对 <code>csml/templates/login/login.html</code> 也做了美化，主要是当验证码不正确时提示验证码不正确，否则再提示用户密码不正确或者用户不存在。</p>
<pre><code class="html">{\% if login_form.captcha.errors \%}
  &lt;div class=&quot;alert alert-warning&quot;&gt;{{ login_form.captcha.errors }}&lt;/div&gt;
{\% elif message \%}
  &lt;div class=&quot;alert alert-warning&quot;&gt;{{ message }}&lt;/div&gt;
{\% endif \%}
</code></pre>
<h1 id="9-Session会话"><a href="#9-Session会话" class="headerlink" title="9. Session会话"></a>9. Session会话</h1><p>因为因特网 HTTP 协议的特性，每一次来自于用户浏览器的请求(request) 都是无状态的、独立的。通俗地说，就是无法保存用户状态，后台服务器根本就不知道当前请求和以前及以后请求是否来自同一用户。对于静态网站，这可能不是个问题，而对于动态网站，尤其是京东、天猫、银行等购物或金融网站，无法识别用户并保持用户状态是致命的，根本就无法提供服务。你可以尝试将浏览器的 <code>cookie</code> 功能关闭，你会发现将无法在京东登录和购物。</p>
<p>为了实现连接状态的保持功能，网站会通过用户的浏览器在用户机器内被限定的硬盘位置中写入一些数据，也就是所谓的 <code>Cookie</code>。通过 <code>Cookie</code> 可以保存一些诸如用户名、浏览记录、表单记录、登录和注销等各种数据。但是这种方式非常不安全，因为 <code>Cookie</code> 保存在用户的机器上，如果 <code>Cookie</code> 被伪造、篡改或删除，就会造成极大的安全威胁。因此，现代网站设计通常将 <code>Cookie</code> 用来保存一些不重要的内容，实际的用户数据和状态还是以 <code>Session</code> 会话的方式保存在服务器端。</p>
<p><code>Session</code> 依赖 <code>Cookie</code>! 但与 <code>Cookie</code> 不同的地方在于 <code>Session</code> 将所有的数据都放在服务器端，用户浏览器的 <code>Cookie</code> 中只会保存一个非明文的识别信息，比如哈希值。</p>
<p>Django 提供了一个通用的 <code>Session</code> 框架，并且可以使用多种 <code>session</code> 数据的保存方式：</p>
<ul>
<li>保存在数据库内</li>
<li>保存到缓存</li>
<li>保存到文件内</li>
<li>保存到 <code>cookie</code> 内</li>
</ul>
<p>通常情况，没有特别需求的话，请使用保存在数据库内的方式，尽量不要保存到 <code>Cookie</code> 内。</p>
<p>Django 的 <code>session</code> 框架默认启用，并已经注册在 <code>app</code> 设置内，如果真的没有启用，那么参考下面的内容添加有说明的那两行，再执行 <code>migrate</code> 命令创建数据表，就可以使用 <code>session</code> 了。</p>
<pre><code class="python">INSTALLED_APPS = [
    &#39;django.contrib.sessions&#39;,
]

MIDDLEWARE = [
    &#39;django.contrib.sessions.middleware.SessionMiddleware&#39;,
]
</code></pre>
<p>当 <code>session</code> 启用后，传递给视图 <code>request</code> 参数的 <code>HttpRequest</code> 对象将包含一个 <code>session</code> 属性，就像一个字典对象一样。你可以在 Django 的任何地方读写 <code>request.session</code> 属性，或者多次编辑使用它。</p>
<h2 id="9-1-使用session"><a href="#9-1-使用session" class="headerlink" title="9.1 使用session"></a>9.1 使用session</h2><p>修改 <code>csml/login/views.py</code> 文件中的 <code>login</code> 函数:</p>
<pre><code class="python">def login(request):
    if request.session.get(&#39;is_login&#39;, None):
        return render(request, &#39;login/index.html&#39;)

    if request.method == &quot;POST&quot;:
        login_form = UserForm(request.POST)
        message = &quot;请检查填写内容&quot;
        if login_form.is_valid():
            username = login_form.cleaned_data[&#39;username&#39;]
            password = login_form.cleaned_data[&#39;password&#39;]

            try:
                user = models.User.objects.get(username=username)
                if user.password == password:
                    request.session[&#39;is_login&#39;] = True
                    request.session[&#39;user_id&#39;] = user.id
                    request.session[&#39;user_name&#39;] = user.username


                    return redirect(&#39;/index/&#39;)
                else:
                    message = &#39;密码不正确!&#39;
            except:
                message = &#39;用户不存在&#39;
        return render(request, &#39;login/login.html&#39;, locals())
    login_form = UserForm()
    return render(request, &#39;login/login.html&#39;, locals())
</code></pre>
<p>通过以下的 <code>if</code> 语句，我们不允许重复登录:</p>
<pre><code class="python">if request.session.get(&#39;is_login&#39;,None):
    return redirect(&quot;/index/&quot;)
</code></pre>
<p>通过下面的语句，我们往 <code>session</code> 字典内写入用户状态和数据:</p>
<pre><code class="python">request.session[&#39;is_login&#39;] = True
request.session[&#39;user_id&#39;] = user.id
request.session[&#39;user_name&#39;] = user.username
</code></pre>
<p>你完全可以往里面写任何数据，不仅仅限于用户相关！</p>
<p>既然有了 <code>session</code> 记录用户登录状态，那么就可以完善我们的 <code>logout</code> 登出视图函数了:</p>
<pre><code class="python">def logout(request):
    if not request.session.get(&#39;is_login&#39;, None):
        # 如果本来就未登录，也就没有登出一说
        return redirect(&quot;/index/&quot;)
    request.session.flush()
    return redirect(&quot;/index/&quot;)
</code></pre>
<p><code>flush()</code> 方法是比较安全的一种做法，而且一次性将 <code>session</code> 中的所有内容全部清空，确保不留后患。但也有不好的地方，那就是如果你在 <code>session</code> 中夹带了一点‘私货’，会被一并删除，这一点一定要注意。</p>
<h2 id="9-2-完善页面"><a href="#9-2-完善页面" class="headerlink" title="9.2 完善页面"></a>9.2 完善页面</h2><p>有了用户状态，就可以根据用户登录与否，展示不同的页面，比如导航条内容：</p>
<ul>
<li>修改 <code>csml/templates/base.html</code> 文件</li>
</ul>
<pre><code class="html">&lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;my-nav&quot;&gt;
    &lt;ul class=&quot;nav navbar-nav&quot;&gt;
        &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;{\% url &#39;index&#39; \%}&quot;&gt;主页&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
    &lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt;
        {\% if request.session.is_login \%}
        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;{{ request.session.user_name }}&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;{\% url &#39;logout&#39; \%}&quot;&gt;登出&lt;/a&gt;&lt;/li&gt;
        {\% else \%}
        &lt;li&gt;&lt;a href=&quot;{\% url &#39;login&#39; \%}&quot;&gt;登录&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;{\% url &#39;register&#39; \%}&quot;&gt;注册&lt;/a&gt;&lt;/li&gt;
        {\% endif \%}
    &lt;/ul&gt;
&lt;/div&gt;</code></pre>
<p>通过 <code>if</code> 判断，当登录时，显示当前用户名和登出按钮。未登录时，显示登录和注册按钮。</p>
<p>注意其中的模板语言，<code></code> 这个变量会被默认传入模板中，可以通过圆点的调用方式，获取它内部的 <code></code>，再进一步的获取 <code>session</code> 中的内容。其实 <code></code> 中的数据远不止此，例如 <code></code> 就可以获取先前的 <code>url</code> 地址。</p>
<p>再修改一下<code>csml/templates/login/index.html</code>页面，根据登录与否的不同，显示不同的内容：</p>
<pre><code class="html">{\% extends &#39;base.html&#39; \%}
{\% block title \%}主页{\% endblock \%}
{\% block content \%}
    {\% if request.session.is_login \%}
        &lt;h1&gt;你好,{{ request.session.user_name }}！欢迎回来！&lt;/h1&gt;
    {\% else \%}
        &lt;h1&gt;你尚未登录，只能访问公开内容！&lt;/h1&gt;
    {\% endif \%}
{\% endblock \%}</code></pre>
<p>来看一下效果:</p>
<ul>
<li>在登录的情况下，访问 <a href="http://127.0.0.1:8000/index/" target="_blank" rel="noopener">http://127.0.0.1:8000/index/</a></li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20191217172156314.png" alt="在这里插入图片描述"></p>
<ul>
<li>登录之后的跳转到 <code>index</code> 页面</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20191217172315879.png" alt="在这里插入图片描述"></p>
<h1 id="10-注册视图"><a href="#10-注册视图" class="headerlink" title="10. 注册视图"></a>10. 注册视图</h1><h2 id="10-1-创建forms"><a href="#10-1-创建forms" class="headerlink" title="10.1 创建forms"></a>10.1 创建forms</h2><p>在 <code>csml/login/forms.py</code> 中新增一个表单类:</p>
<pre><code class="python">class RegisterForm(forms.Form):
    gender = ((&#39;male&#39;, &quot;男&quot;), (&#39;female&#39;, &quot;女&quot;),)
    username = forms.CharField(label=&quot;用户名&quot;, max_length=128, widget=forms.TextInput(attrs={&#39;class&#39;: &#39;form-control&#39;}))
    password1 = forms.CharField(label=&quot;密码&quot;, max_length=256, widget=forms.PasswordInput(attrs={&#39;class&#39;: &#39;form-control&#39;}))
    password2 = forms.CharField(label=&quot;确认密码&quot;, max_length=256, widget=forms.PasswordInput(attrs={&#39;class&#39;: &#39;form-control&#39;}))
    email = forms.EmailField(label=&quot;邮箱地址&quot;, widget=forms.EmailInput(attrs={&#39;class&#39;: &#39;form-control&#39;}))
    sex = forms.ChoiceField(label=&#39;性别&#39;, choices=gender)
    captcha = CaptchaField(label=&#39;验证码&#39;, error_messages={&quot;invalid&quot;: &quot;验证码错误!&quot;})
</code></pre>
<p>简单说明:</p>
<ul>
<li><code>gender</code> 和 <code>User</code> 模型中的一样，其实可以拉出来作为常量共用，为了直观，特意重写一遍；</li>
<li><code>password1</code> 和 <code>password2</code>，用于输入两遍密码，并进行比较，防止误输密码；</li>
<li><code>email</code> 是一个邮箱输入框</li>
<li><code>sex</code> 是一个 <code>select</code> 下拉框</li>
</ul>
<h2 id="10-2-完善register-html"><a href="#10-2-完善register-html" class="headerlink" title="10.2 完善register.html"></a>10.2 完善register.html</h2><p>修改 <code>csml/templates/login/register.html</code> 文件:</p>
<pre><code class="html">{\% extends &#39;base.html&#39; \%}

{\% block title \%}注册{\% endblock \%}
{\% block content \%}
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;col-md-4 col-md-offset-4&quot;&gt;
            &lt;form class=&#39;form-register&#39; action=&quot;/register/&quot; method=&quot;post&quot;&gt;

                {\% if login_form.captcha.errors \%}
                    &lt;div class=&quot;alert alert-warning&quot;&gt;{{ login_form.captcha.errors }}&lt;/div&gt;
                {\% elif message \%}
                    &lt;div class=&quot;alert alert-warning&quot;&gt;{{ message }}&lt;/div&gt;
                {\% endif \%}

                {\% csrf_token \%}

                &lt;h2 class=&quot;text-center&quot;&gt;欢迎注册&lt;/h2&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    {{ register_form.username.label_tag }}
                    {{ register_form.username }}
                &lt;/div&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    {{ register_form.password1.label_tag }}
                    {{ register_form.password1 }}
                &lt;/div&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    {{ register_form.password2.label_tag }}
                    {{ register_form.password2 }}
                &lt;/div&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    {{ register_form.email.label_tag }}
                    {{ register_form.email }}
                &lt;/div&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    {{ register_form.sex.label_tag }}
                    {{ register_form.sex }}
                &lt;/div&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    {{ register_form.captcha.label_tag }}
                    {{ register_form.captcha }}
                &lt;/div&gt;

                &lt;button type=&quot;reset&quot; class=&quot;btn btn-default pull-left&quot;&gt;重置&lt;/button&gt;
                &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary pull-right&quot;&gt;提交&lt;/button&gt;

            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
{\% endblock \%}
</code></pre>
<h2 id="10-3-注册视图"><a href="#10-3-注册视图" class="headerlink" title="10.3 注册视图"></a>10.3 注册视图</h2><p>修改 <code>csml/login/views.py</code> 文件来完善 <code>register</code> 视图函数:</p>
<pre><code class="python">from .forms import UserForm, RegisterForm

def register(request):
    if request.session.get(&#39;is_login&#39;, None):
        # 登录状态不允许注册。你可以修改这条原则！
        return redirect(&quot;/index/&quot;)

    if request.method == &quot;POST&quot;:
        register_form = RegisterForm(request.POST)
        message = &quot;请检查填写的内容！&quot;
        if register_form.is_valid():  # 获取数据
            username = register_form.cleaned_data[&#39;username&#39;]
            password1 = register_form.cleaned_data[&#39;password1&#39;]
            password2 = register_form.cleaned_data[&#39;password2&#39;]
            email = register_form.cleaned_data[&#39;email&#39;]
            sex = register_form.cleaned_data[&#39;sex&#39;]

            if password1 != password2:  # 判断两次密码是否相同
                message = &quot;两次输入的密码不同！&quot;
                return render(request, &#39;login/register.html&#39;, locals())
            else:
                same_name_user = models.User.objects.filter(username=username)
                if same_name_user:  # 用户名唯一
                    message = &#39;用户已经存在，请重新选择用户名！&#39;
                    return render(request, &#39;login/register.html&#39;, locals())
                same_email_user = models.User.objects.filter(email=email)
                if same_email_user:  # 邮箱地址唯一
                    message = &#39;该邮箱地址已被注册，请使用别的邮箱！&#39;
                    return render(request, &#39;login/register.html&#39;, locals())

                # 当一切都OK的情况下，创建新用户
                new_user = models.User.objects.create()
                new_user.username = username
                new_user.password = password1
                new_user.email = email
                new_user.sex = sex
                new_user.save()
                return redirect(&#39;/login/&#39;)  # 自动跳转到登录页面
    register_form = RegisterForm()
    return render(request, &#39;login/register.html&#39;, locals())
</code></pre>
<p>从大体逻辑上，也是先实例化一个 <code>RegisterForm</code> 的对象，然后使用 <code>is_valid()</code> 验证数据，再从 <code>cleaned_data</code> 中获取数据。</p>
<p>重点在于注册逻辑，首先两次输入的密码必须相同，其次不能存在相同用户名和邮箱，最后如果条件都满足，利用 <code>ORM</code> 的 API，创建一个用户实例，然后保存到数据库内。</p>
<p>我们来访问访问一下 <a href="http://127.0.0.1:8000/register/" target="_blank" rel="noopener">http://127.0.0.1:8000/register/</a> ，看一下效果:</p>
<p><img src="https://img-blog.csdnimg.cn/20191217175035492.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0x1Q2gxTW9uc3Rlcg==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>注册成功在 <code>admin</code> 后台可以看到注册的用户。</p>
<h2 id="10-4-密码加密"><a href="#10-4-密码加密" class="headerlink" title="10.4 密码加密"></a>10.4 密码加密</h2><p>用户注册的密码应该加密才对，对于如何加密密码，有很多不同的途径，其安全程度也高低不等。这里我们使用 Python 内置的 <code>hashlib</code> 库，使用哈希值的方式加密密码，可能安全等级不够高，但足够简单，方便使用，不是么？</p>
<p>首先在 <code>csml/login/views.py</code> 编写一个 <code>hash</code> 函数:</p>
<pre><code class="python">import hashlib


def hash_code(s, salt=&#39;boxin&#39;):
    h = hashlib.sha256()
    s += salt
    h.update(s.encode())  # update方法只接收bytes类型
    return h.hexdigest()
</code></pre>
<p>然后，我们还要对 <code>login</code> 和 <code>register</code> 视图进行一下修改:</p>
<pre><code class="python">#login

if user.password == hash_code(password):  # 哈希值和数据库内的值进行比对

#register

new_user.password = hash_code(password1)  # 使用加密密码</code></pre>
<p>重启服务器，进入注册页面，新建一个用户，然后进入 admin 后台，查看用户的密码情况。</p>
<h1 id="11-二级路由"><a href="#11-二级路由" class="headerlink" title="11. 二级路由"></a>11. 二级路由</h1><h2 id="11-1-添加登录的一级路由"><a href="#11-1-添加登录的一级路由" class="headerlink" title="11.1 添加登录的一级路由"></a>11.1 添加登录的一级路由</h2><p>修改 <code>csml/csml/settings.py</code> 文件，添加 <code>user</code> 一级路由，用于登录登出以及注册，<strong>注意</strong>这里需要在 <code>csml/login/urls.py</code> 文件中设置 <code>app_name = &#39;user&#39;</code>，否则这里的 <code>namespace</code> 会报错:</p>
<pre><code class="python">from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path(&#39;admin/&#39;, admin.site.urls),
    path(&#39;captcha/&#39;, include(&#39;captcha.urls&#39;)),
    path(&#39;user/&#39;, include(&#39;login.urls&#39;, namespace=&quot;user&quot;)),
]
</code></pre>
<blockquote>
<p>  <strong>注意</strong>: <code>captcha</code> 还是需要配置在 <code>csml/csml/settings.py</code> 文件中。</p>
</blockquote>
<h2 id="11-2-配置二级路由"><a href="#11-2-配置二级路由" class="headerlink" title="11.2 配置二级路由"></a>11.2 配置二级路由</h2><p>在 <code>csml/login</code> 中添加 <code>urls.py</code> 文件，添加一下内容:</p>
<pre><code class="python">from django.urls import path, include
from login import views

app_name = &#39;user&#39;

urlpatterns = [
    path(&#39;index/&#39;, views.index, name=&#39;index&#39;),
    path(&#39;login/&#39;, views.login, name=&#39;login&#39;),
    path(&#39;register/&#39;, views.register, name=&#39;register&#39;),
    path(&#39;logout/&#39;, views.logout, name=&#39;logout&#39;),
]
</code></pre>
<h2 id="11-3-修改HTML路由"><a href="#11-3-修改HTML路由" class="headerlink" title="11.3 修改HTML路由"></a>11.3 修改HTML路由</h2><p>修改相应 HTML 文件，将原先 <code>/index/</code> 修改为 <code>{\% url &#39;user:index&#39; \%}</code>，其他的也是类似。</p>
<h2 id="11-4-修改views-py中的重定向"><a href="#11-4-修改views-py中的重定向" class="headerlink" title="11.4 修改views.py中的重定向"></a>11.4 修改views.py中的重定向</h2><p>原本在 <code>views.py</code> 使用的是 <code>redirect(&#39;/index/&#39;)</code> 需要都修改为 <code>redirect(reverse(&#39;user:index&#39;))</code>。</p>
<h1 id="12-参考文档"><a href="#12-参考文档" class="headerlink" title="12. 参考文档"></a>12. 参考文档</h1><ul>
<li><a href="https://blog.csdn.net/laikaikai/article/details/80563387" target="_blank" rel="noopener">https://blog.csdn.net/laikaikai/article/details/80563387</a></li>
<li><a href="https://www.cnblogs.com/MnCu8261/p/5859941.html" target="_blank" rel="noopener">https://www.cnblogs.com/MnCu8261/p/5859941.html</a></li>
<li><a href="https://www.cnblogs.com/ryxiong-blog/articles/11072412.html" target="_blank" rel="noopener">https://www.cnblogs.com/ryxiong-blog/articles/11072412.html</a></li>
<li><a href="https://www.cnblogs.com/2mei/p/9217109.html" target="_blank" rel="noopener">https://www.cnblogs.com/2mei/p/9217109.html</a></li>
<li>Django之Model的Meta选项详解 : <a href="https://blog.csdn.net/bbwangj/article/details/79967858" target="_blank" rel="noopener">https://blog.csdn.net/bbwangj/article/details/79967858</a></li>
<li>Django 合集: <a href="https://blog.csdn.net/jaket5219999/category_6794889.html" target="_blank" rel="noopener">https://blog.csdn.net/jaket5219999/category_6794889.html</a></li>
<li>Django-captcha: <ul>
<li><a href="https://blog.csdn.net/xxm524/article/details/48370337" target="_blank" rel="noopener">https://blog.csdn.net/xxm524/article/details/48370337</a></li>
<li><a href="https://blog.csdn.net/zjw_python/article/details/78949837" target="_blank" rel="noopener">https://blog.csdn.net/zjw_python/article/details/78949837</a></li>
</ul>
</li>
<li>静态文件引用: <a href="https://www.cnblogs.com/zmdComeOn/p/11219956.html" target="_blank" rel="noopener">https://www.cnblogs.com/zmdComeOn/p/11219956.html</a></li>
</ul>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 yu_mingm623@163.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>


<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>Django用户登录与注册系统</p>
    <p><span class="copy-title">文章字数:</span><span class="post-count">10k</span></p>
    <p><span class="copy-title">本文作者:</span><a  title="郁明敏">郁明敏</a></p>
    <p><span class="copy-title">发布时间:</span>2019-12-16, 21:22:02</p>
    <p><span class="copy-title">最后更新:</span>2019-12-17, 23:28:06</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/2019/12/16/django-user-login/" title="Django用户登录与注册系统">http://www.monsteryu.top/2019/12/16/django-user-login/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>





    
        <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
    });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async
        src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<input type="hidden" id="MathJax-js"
        value="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</input>
    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2019.11 路痴大魔王</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" ></a>

    </div>
</div>
<div class="acParent"></div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['@郁明敏','#AirFlow','#蓝鲸','#Logistic Regression','#Centos','#MySQL','#chrome','#Requests','#impala','#datagrip','#Flask','#GitHub','#hadoop','#hive','#Python学习资源','#Jupyter','#Linux','#LGBM','#GLIBC','#系统','#Mac','#markdown','#notepad','#pandas','#pycharm','#Python常用库','#impyla','#强化学习','#统计基础','#随机过程','#sublime','#windows软件','#windows','#xshell','#3-hexo','#hexo','#Python小技巧','#Python关键字','#数据挖掘','#Django用户登录',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().split('\n').length - 1, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 602px;
    }
    .nav.fullscreen {
        margin-left: -602px;
    }
    .nav-left {
        width: 180px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
